!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=19)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t=0,e=0,r=0,n=1){this.x=t,this.y=e,this.z=r,this.w=n}perspectiveDivide(){const{x:t,y:e,z:r,w:o}=this;return new n(t/o,e/o,r/o)}minus(t){const{x:e,y:r,z:o,w:i}=this;return new n(e-t.x,r-t.y,o-t.z,i)}plus(t){const{x:e,y:r,z:o,w:i}=this;return new n(e+t.x,r+t.y,o+t.z,i)}times(t){const{x:e,y:r,z:o,w:i}=this;return new n(e*t,r*t,o*t,i)}dot(t){const{x:e,y:r,z:n,w:o}=this;return e*t.x+r*t.y+n*t.z}normalize(){const{x:t,y:e,z:r,w:o}=this,i=Math.sqrt(t*t+e*e+r*r);return new n(t/i,e/i,r/i,o)}static fromVectorOrCoords(t,e,r){return r=t instanceof n?t.z:r||0,e=t instanceof n?t.y:e||0,t=t instanceof n?t.x:t,new n(t,e,r)}}e.Vector3D=n},function(t,e,r){"use strict";function n(t,e,r){const n=t.createShader(e);if(!n)throw new Error("gl.createShader() failed!");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const e="Compiling shader failed: "+t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(e)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.getAttribLocation=function(t,e,r){const n=t.getAttribLocation(e,r);if(-1===n)throw new Error(`Unable to find attribute '${r}'!`);return n};e.GlProgram=class{constructor(t,e,r){this.gl=t;const o=n(t,WebGLRenderingContext.VERTEX_SHADER,e),i=n(t,WebGLRenderingContext.FRAGMENT_SHADER,r);this.program=function(t,e,r){const n=t.createProgram();if(!n)throw new Error("gl.createProgram() failed!");if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){const e="Linking program failed: "+t.getProgramInfoLog(n);throw t.deleteProgram(n),new Error(e)}return n}(t,o,i)}activate(){this.gl.useProgram(this.program)}};class o{constructor(t,e){this.program=t,this.location=function(t,e,r){const n=t.getUniformLocation(e,r);if(null===n)throw new Error(`Unable to find uniform '${r}'!`);return n}(t.gl,t.program,e)}}e.GlUniformVector3D=class extends o{set(t){this.program.gl.uniform4fv(this.location,[t.x,t.y,t.z,t.w])}};e.GlUniformFloat=class extends o{set(t){this.program.gl.uniform1f(this.location,t)}};e.GlUniformMatrix3D=class extends o{set(t){this.program.gl.uniformMatrix4fv(this.location,!1,t.toFloat32Array())}};e.GlUniformBoolean=class extends o{set(t){this.program.gl.uniform1f(this.location,t?1:0)}};function i(t){const e=Math.log2(t);return e===Math.floor(e)}e.GlUniformInteger=class extends o{set(t){this.program.gl.uniform1i(this.location,t)}},e.setupBuffer=function(t,e){const r=t.createBuffer();if(null===r)throw new Error("gl.createBuffer() failed!");return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),r},e.setupTexture=function(t,e,r,n){const o=t.createTexture();if(null===o)throw new Error("gl.createTexture() failed!");if(n||(n=r),!i(r)||!i(n))throw new Error("Texture dimensions must be powers of two!");return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,n,0,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),o}},,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getElement=function(t,e,r=document){const n=`${t}${e}`,o=r.querySelector(n);if(!o)throw new Error(`Couldn't find any elements matching "${n}"`);return o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1);e.Points3DRenderer=class{constructor(t,e){this.program=t,this.points=e;const{gl:r}=t;this.buffer=n.setupBuffer(r,e.toFloat32Array())}setupForDrawing(){const{gl:t,positionAttributeLocation:e}=this.program;t.enableVertexAttribArray(e),t.bindBuffer(t.ARRAY_BUFFER,this.buffer);const r=t.FLOAT;t.vertexAttribPointer(e,3,r,!1,0,0)}draw(t=WebGLRenderingContext.TRIANGLES){const{gl:e}=this.program,r=this.points.length;e.drawArrays(t,0,r)}}},,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);class o{constructor(t){this.array=t}toFloat32Array(){const{array:t}=this,e=new Float32Array(3*t.length);let r=0;for(let n=0;n<e.length;n+=3)e[n]=t[r].x,e[n+1]=t[r].y,e[n+2]=t[r].z,r+=1;return e}concat(t){const e=this.array.concat(t.array);return new o(e)}map(t){return new o(this.array.map(t))}get length(){return this.array.length}static fromArray(t){const e=t.length/3,r=new Array(e);let i=0;for(let o=0;o<e;o++){const e=t[i],s=t[i+1],a=t[i+2];r[o]=new n.Vector3D(e,s,a),i+=3}return new o(r)}}e.Points3D=o},,,,,,,,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),o=r(3),i=r(6),s=r(4),a=r(20),u=r(21);window.onload=(()=>{const t=o.getElement("canvas","#canvas"),e=t.getContext("webgl");if(!e)throw new Error("webgl is not supported on this browser!");const r=new class extends n.GlProgram{constructor(t){super(t,a,u),this.positionAttributeLocation=n.getAttribLocation(t,this.program,"a_position"),this.sampler=new n.GlUniformInteger(this,"u_sampler"),this.size=new n.GlUniformFloat(this,"u_size"),this.phase=new n.GlUniformFloat(this,"u_phase")}setupTextureForDrawing(t,e=0){const{gl:r}=this;r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t),this.sampler.set(e)}}(e),c=i.Points3D.fromArray([-1,1,0,-1,-1,0,1,-1,0,-1,1,0,1,-1,0,1,1,0]),l=new s.Points3DRenderer(r,c),f=n.setupTexture(e,function(t){const e=new Uint8Array(t*t*4);let r=0;for(let n=0;n<t;n++){const o=Math.floor(n%8/8*255);for(let n=0;n<t;n++){const t=o,n=0,i=90,s=255;e[r]=t,e[r+1]=n,e[r+2]=i,e[r+3]=s,r+=4}}return e}(64),64);let h=0;const g=()=>{e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT),r.activate(),r.size.set(t.width),l.setupForDrawing(),r.setupTextureForDrawing(f,0),r.phase.set(h),l.draw(),h+=.025,window.requestAnimationFrame(g)};g()})},function(t,e){t.exports="precision mediump float;\n\nattribute vec4 a_position;\n\nvoid main() {\n  gl_Position = a_position;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nuniform float u_size;\nuniform float u_phase;\nuniform sampler2D u_sampler;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  float u = gl_FragCoord.x / u_size;\n  float v = gl_FragCoord.y / u_size;\n  float vShiftAmount = sin(gl_FragCoord.x / u_size * PI + u_phase);\n\n  v += vShiftAmount * 0.1;\n\n  gl_FragColor = texture2D(u_sampler, vec2(u, v));\n}\n"}]);
//# sourceMappingURL=texture-fun.bundle.js.map